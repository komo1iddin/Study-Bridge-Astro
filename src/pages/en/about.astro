---
import Layout from '@/layouts/Layout.astro';
import { Clock, School, Users, ArrowRight, Award, Heart, Target } from 'lucide-astro';
import { getLangFromUrl } from '@/i18n/langUtils'; 
import { useTranslations } from '@/i18n/utils';
import { getStaticPaths } from '@/i18n/utils';
import HeroStats from '@/components/features/about/HeroStats.astro';
import Timeline from '@/components/features/about/Timeline.astro';
import TeamMember from '@/components/features/about/TeamMember.astro';
import { teamMembers } from '@/data/team';
import Values from '@/components/features/about/Values.astro';
import Breadcrumbs from '@/components/shared/navigation/Breadcrumbs.astro';
import SectionHeader from '@/components/ui/SectionHeader.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

export { getStaticPaths };

const breadcrumbItems = [
  { label: t('nav.home'), href: `/${lang}` },
  { label: t('nav.about.us'), href: `/${lang}/about` }
];

const stats = [
  { value: '1000+', label: 'Mamnun talabalar' },
  { value: '50+', label: 'Hamkor universitetlar' },
  { value: '95%', label: 'Muvaffaqiyatli qabullar' },
  { value: '10+', label: 'Yillik tajriba' }
];

const achievements = [
  {
    title: 'Ish tajribasi',
    value: '10+ yil',
    description: 'Talabalarga Xitoyning eng yaxshi universitetlariga kirish imkoniyatini yaratamiz',
    icon: Clock
  },
  {
    title: 'Hamkorlik tarmog\'i',
    value: '50+ universitet',
    description: "Xitoyning yetakchi universitetlari bilan to'g'ridan-to'g'ri shartnomalar",
    icon: School
  },
  {
    title: 'Muvaffaqiyatli holatlar',
    value: '1000+ talaba',
    description: "Talabalarga Xitoyda o'qish orzusini amalga oshirishda yordam berdik",
    icon: Users
  }
];

const values = [
  {
    title: 'Sifat',
    description: "Har bir talaba uchun eng yaxshi ta'lim imkoniyatlarini ta'minlash",
    icon: Award
  },
  {
    title: 'Ishonch',
    description: "Har bir talaba bilan shaffof va halol munosabatlar o'rnatish",
    icon: Heart
  },
  {
    title: 'Natijalar',
    description: "Talabalarning muvaffaqiyati bizning asosiy maqsadimiz",
    icon: Target
  }
];

const timeline = [
  {
    year: '2013',
    title: 'Kompaniya tashkil etildi',
    description: "Xitoy universitetlariga o'qishga kirishda yordam berish maqsadida tashkil etilgan"
  },
  {
    year: '2015',
    title: 'Birinchi hamkorlik shartnomasi',
    description: "Pekin universiteti bilan birinchi rasmiy hamkorlik shartnomasi imzolandi"
  },
  {
    year: '2018',
    title: '500+ talaba',
    description: "500 dan ortiq talaba bizning yordamimiz bilan Xitoyda o'qishga kirdi"
  },
  {
    year: '2023',
    title: '50+ hamkor universitetlar',
    description: "Xitoyning eng nufuzli universitetlari bilan hamkorlik aloqalari o'rnatildi"
  }
];
---

<Layout title="Biz haqimizda | Study in China">
  <div class="bg-white">
    <!-- Hero Section -->
    <section class="relative bg-gradient-to-br from-primary-600 to-primary-700 text-white py-24 overflow-hidden">
      <div class="absolute inset-0 overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-r from-primary-900/90 to-primary-700/80"></div>
        <img src="https://placehold.co/1920x1080/png" alt="Background" class="w-full h-full object-cover opacity-20">
      </div>

      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
        <div class="lg:grid lg:grid-cols-2 lg:gap-12 items-center">
          <!-- Content -->
          <div data-aos="fade-right" data-aos-duration="1000">
            <Breadcrumbs items={breadcrumbItems} class="mb-8" />
            
            <h1 class="text-4xl sm:text-5xl font-bold mb-6">Bizning kompaniya haqida</h1>
            <p class="text-xl text-primary-100 leading-relaxed mb-8">
              Biz talabalarga Xitoyning eng yaxshi universitetlarida o'qish orzusini amalga oshirishga yordam beramiz
            </p>
            <div class="flex flex-wrap gap-4">
              <button
                onclick="window.uiStore.toggleContactModal(true)"
                class="inline-flex items-center px-6 py-3 border-2 border-white text-base font-medium rounded-lg text-white hover:bg-white hover:text-primary-700 transition-all duration-300"
              >
                Biz bilan bog'laning
              </button>
              <a 
                href="#services" 
                class="inline-flex items-center px-6 py-3 bg-white text-base font-medium rounded-lg text-primary-700 hover:bg-primary-50 transition-all duration-300"
              >
                Xizmatlarimiz
              </a>
            </div>
          </div>

          <!-- Stats -->
          <div class="mt-10 lg:mt-0" data-aos="fade-left" data-aos-duration="1000" data-aos-delay="200">
            <HeroStats stats={stats} />
          </div>
        </div>
      </div>
    </section>

    <!-- Our Story Section -->
    <section class="py-20">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <SectionHeader
          title="Bizning tarix"
          subtitle="2013-yildan buyon Xitoyda ta'lim olishni istagan talabalarga yordam berib kelmoqdamiz"
        />

        <div class="lg:grid lg:grid-cols-2 lg:gap-16 items-center">
          <div class="mb-10 lg:mb-0" data-aos="fade-right">
            <img src="https://placehold.co/600x400/png" alt="Our Story" class="rounded-xl shadow-lg w-full h-auto object-cover">
          </div>
          <div data-aos="fade-left">
            <p class="text-lg text-gray-600 mb-6">
              Study in China kompaniyasi 2013-yilda Xitoyda o'qishni istagan o'zbek talabalariga yordam berish maqsadida tashkil etilgan. Kompaniyamiz asoschisi Aziza Karimova o'zi ham Xitoyda ta'lim olgan va bu jarayonda ko'plab qiyinchiliklarga duch kelgan.
            </p>
            <p class="text-lg text-gray-600 mb-8">
              Bugungi kunda biz Xitoyning 50 dan ortiq nufuzli universitetlari bilan hamkorlik qilamiz va har yili yuzlab talabalarga Xitoyda o'qish orzusini amalga oshirishda yordam beramiz.
            </p>
            
            <Timeline items={timeline} />
          </div>
        </div>
      </div>
    </section>

    <!-- Mission & Values Section -->
    <section class="py-20 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <SectionHeader
          title="Bizning missiya va qadriyatlarimiz"
          subtitle="Har bir talabaga Xitoyda sifatli ta'lim olish imkoniyatini yaratish"
        />
        
        <Values values={values} />
      </div>
    </section>

<!-- Team Section -->
<section class="py-20">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-bold text-gray-900 mb-4">Bizning jamoa</h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">
        Sizga muvaffaqiyatga erishish yo'lida yordam beradigan professionallar
      </p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
      {teamMembers.map((member) => (
        <TeamMember {...member} />
      ))}
    </div>
  </div>
</section>


    <!-- CTA Section -->
    <section class="bg-primary-600 text-white py-20">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl sm:text-4xl font-bold mb-8">Xitoyga o'z yo'lingizni boshlashga tayyormisiz?</h2>
        <p class="text-xl text-primary-100 mb-10 max-w-3xl mx-auto">
          Bepul maslahat olish va o'qish imkoniyatlari haqida ko'proq bilish uchun biz bilan bog'laning
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <button
            onclick="window.uiStore.toggleContactModal(true)"
            class="inline-flex items-center justify-center px-8 py-4 border border-transparent text-lg font-medium rounded-xl text-primary-600 bg-white hover:bg-gray-50 transition-all duration-300 hover:transform hover:-translate-y-1"
            data-aos="zoom-in" data-aos-delay="200"
          >
            Biz bilan bog'laning
            <ArrowRight class="ml-2 h-5 w-5" />
          </button>
        </div>
      </div>
    </section>
  </div>
</Layout>

<script>

  import { preferencesStore } from '@/data/store/preferences/preferencesStore';
    
    // Check for reduced motion preference
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      preferencesStore.setReducedMotion(true);
    }

  // Optimize animations
  document.addEventListener('astro:page-load', () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '50px'
    });

    // Observe elements with animations
    document.querySelectorAll('[data-aos]').forEach(element => {
      observer.observe(element);
    });
  });
</script>

<style>
  /* Qo'shimcha stillar tashqi ko'rinishni yaxshilash uchun */
  .bg-primary-700 {
    background-image: linear-gradient(135deg, var(--color-primary-800), var(--color-primary-600));
  }
  
  /* Optimize transitions */
  .visible {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }
  
  [data-aos] {
    opacity: 0;
    transform: translateY(20px);
  }
  
  /* Hover effektlar */
  .hover\:transform:hover {
    transition: all 0.3s ease;
  }
  
  /* Gradient overlay for images */
  .bg-gradient-overlay {
    background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 50%);
  }

  /* Reduce motion */
  @media (prefers-reduced-motion: reduce) {
    .visible,
    [data-aos],
    .hover\:transform:hover {
      transition: none;
      animation: none;
      transform: none;
    }
  }
</style>