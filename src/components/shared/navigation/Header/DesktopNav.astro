---
import { ChevronDown } from 'lucide-astro';
import { getNavigation } from '@/data/constants/navigation';

// Получаем текущий язык из URL
const currentPath = Astro.url.pathname;
const currentLang = currentPath.split('/')[1] || 'uz';

// Получаем навигацию для текущего языка
const navigation = getNavigation(currentLang);
---

<nav class="flex items-center">
  <div class="flex items-center gap-1">
    {
      navigation.map((item) => {
        if (item.items) {
          return (
            <div class="relative group">
              <button class="flex items-center text-gray-600 hover:text-blue-600 text-sm font-medium gap-1 py-2 px-2.5 rounded-lg hover:bg-gray-50 transition-colors duration-200">
                {item.name}
                <ChevronDown class="h-4 w-4 transition-transform duration-200 group-hover:rotate-180 ml-0.5" />
              </button>
              <div class="absolute left-1/2 -translate-x-1/2 top-full pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                <div class="bg-white rounded-lg shadow-md py-1.5 min-w-[200px] border border-gray-100">
                  {item.items.map((subItem) => (
                    <a
                      href={subItem.href}
                      class="flex items-center px-3 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors duration-200"
                    >
                      {subItem.name}
                    </a>
                  ))}
                </div>
              </div>
            </div>
          );
        }
        return (
          <a
            href={item.href}
            class="px-2.5 py-2 text-gray-600 hover:text-blue-600 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors duration-200"
          >
            {item.name}
          </a>
        );
      })
    }
  </div>
</nav>
